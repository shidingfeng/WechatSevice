language: java
jdk:
  - oraclejdk8
before_install:
  - openssl aes-256-cbc -K $encrypted_b9bad04cd03e_key -iv $encrypted_b9bad04cd03e_iv
    -in id_rsa.enc -out ~/.ssh/id_rsa -d
  - chmod 600 ~/.ssh/id_rsa
after_success:
  - scp ./target/wechat-service-1.0.0-SNAPSHOT.jar root@47.110.46.159:/root/workspace
addons:
  ssh_known_hosts: 47.110.46.159
deploy:
  provider: releases
  # Github oauth token
  api_key: 8fc5297d99da7f165fa1531f67d830f32debef22
  file: ./target/wechat-service-1.0.0-SNAPSHOT.jar
  # 避免 Travis CI在部署之前清空生成的APK文件
  skip_cleanup: true
  on:
    tags: true